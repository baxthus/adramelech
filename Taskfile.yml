version: '3'

dotenv: ['.env']

vars:
  DASHBOARD: './dashboard'
  DATABASE: './database'
  BOT: './bot'

tasks:
  # Dashboard
  dashboard:
    dir: '{{.DASHBOARD}}'
    cmds:
      - bun run dev

  # Bot
  bot:
    dir: '{{.BOT}}'
    cmds:
      - bun run dev

  # Database / Valkey
  up:
    cmds:
      - podman-compose up -d
  down:
    cmds:
      - podman-compose down
  push:
    dir: '{{.DATABASE}}'
    cmds:
      - bunx drizzle-kit push
  studio:
    dir: '{{.DATABASE}}'
    cmds:
      - bunx drizzle-kit studio
